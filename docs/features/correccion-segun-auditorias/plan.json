{
  "spec_version": "1.0",
  "process_id": "correccion-auditorias",
  "task_id": "correccion-segun-auditorias",
  "plan_date": "2026-02-21",
  "status": "planned",
  "phases": [
    {
      "id": "1",
      "name": "C1 DTOs Logs",
      "priority": "blocking",
      "tasks": [
        { "id": "1.1", "action": "create", "target": "src/GesFer.Admin.Back.Application/DTOs/Logs/", "description": "Crear carpeta DTOs/Logs" },
        { "id": "1.2", "action": "create", "target": "CreateLogDto.cs", "description": "DTO según AUDITORIA_2026_02_21" },
        { "id": "1.3", "action": "create", "target": "CreateAuditLogDto.cs", "description": "DTO según auditoría" },
        { "id": "1.4", "action": "create", "target": "LogDto.cs", "description": "DTO según auditoría" },
        { "id": "1.5", "action": "create", "target": "LogsPagedResponseDto.cs", "description": "DTO según auditoría" },
        { "id": "1.6", "action": "create", "target": "PurgeLogsResponseDto.cs", "description": "DTO según auditoría" },
        { "id": "1.7", "action": "verify", "target": "dotnet build", "description": "Compilación exitosa" }
      ]
    },
    {
      "id": "2",
      "name": "C2 Credenciales Program.cs",
      "priority": "high",
      "tasks": [
        { "id": "2.1", "action": "modify", "target": "src/GesFer.Admin.Back.Api/Program.cs", "description": "Sustituir fallback por throw InvalidOperationException" },
        { "id": "2.2", "action": "verify", "target": "no credentials in Program.cs", "description": "Sin Password= en texto plano" }
      ]
    },
    {
      "id": "3",
      "name": "Verificación C3 C4 C5",
      "priority": "high",
      "tasks": [
        { "id": "3.1", "action": "verify", "target": "LogController", "description": "Solo IApplicationDbContext" },
        { "id": "3.2", "action": "verify", "target": "Application.csproj", "description": "Sin ref a Infrastructure" },
        { "id": "3.3", "action": "verify", "target": "interfaces", "description": "En Application/Common/Interfaces" }
      ]
    },
    {
      "id": "4",
      "name": "M2 Limpieza src/tests",
      "priority": "medium",
      "tasks": [
        { "id": "4.1", "action": "check", "target": "src/tests/", "description": "Comprobar existencia y contenido" },
        { "id": "4.2", "action": "modify", "target": "GesFer.Admin.Back.sln", "description": "Actualizar rutas si UnitTests bajo tests/" },
        { "id": "4.3", "action": "delete", "target": "src/tests/ (legacy)", "description": "Eliminar solo si no es Admin.Back" }
      ]
    }
  ],
  "acceptance_criteria": [
    "dotnet build exitoso",
    "No credenciales en Program.cs",
    "Application sin ref Infrastructure",
    "LogController usa IApplicationDbContext"
  ],
  "ready_for_implementation": true
}
