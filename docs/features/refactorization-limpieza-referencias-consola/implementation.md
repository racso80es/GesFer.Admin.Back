# IMPL: Limpieza de Referencias a Consola (Herencia Monolito)

**Plan:** plan.md | **SPEC:** spec.md | **Rama:** feat/refactorization-limpieza-referencias-consola  
**Ruta:** docs/features/refactorization-limpieza-referencias-consola/

---

## Ítems de implementación

### 1.1 – Modificar: acción spec

- **Id:** 1.1
- **Acción:** Modificar
- **Ruta:** `SddIA/actions/spec/spec.md`
- **Ubicación:** Sección "Implementación" y bloque de sintaxis (comando bash).
- **Propuesta:**
  - Sustituir "Esta acción se implementa mediante el comando `GesFer.Console --spec`." por: "Esta acción se implementa mediante documentación manual en la carpeta de tarea (paths.featurePath o paths.fixPath, Cúmulo). Los comandos de sistema se ejecutan vía skill **invoke-command** (paths.skillCapsules[\"invoke-command\"]). Los estándares de documentación siguen la skill **documentation** (paths.skillsDefinitionPath/documentation/)."
  - Eliminar el bloque "### Sintaxis" con el comando `dotnet run --project src/Console/GesFer.Console.csproj ...`.
  - Mantener Argumentos, Flujo de Ejecución, Integración con Agentes y Estándares de Calidad sin referencias a GesFer.Console.

### 1.2 – Modificar: acción clarify

- **Id:** 1.2
- **Acción:** Modificar
- **Ruta:** `SddIA/actions/clarify/spec.md`
- **Ubicación:** Sección "Implementación" y bloque de sintaxis.
- **Propuesta:**
  - Sustituir "Esta acción se implementa mediante el comando `GesFer.Console --clarify`." por: "Esta acción se implementa mediante documentación manual en la carpeta de la tarea. Los comandos de sistema se ejecutan vía skill **invoke-command** (paths.skillCapsules[\"invoke-command\"]). Estándares según skill **documentation** (paths.skillsDefinitionPath/documentation/)."
  - Eliminar el bloque "### Sintaxis" con el comando dotnet run src/Console/...
  - Mantener resto de secciones sin referencias a GesFer.Console.

### 1.3 – Modificar: acción planning

- **Id:** 1.3
- **Acción:** Modificar
- **Ruta:** `SddIA/actions/planning/spec.md`
- **Ubicación:** Sección "Implementación" y bloque de sintaxis.
- **Propuesta:**
  - Sustituir "Esta acción se implementa mediante el comando `GesFer.Console --plan`." por: "Esta acción se implementa mediante documentación manual (plan en carpeta de tarea). Los comandos de sistema vía skill **invoke-command** (paths.skillCapsules[\"invoke-command\"]). Estándares según skill **documentation** (paths.skillsDefinitionPath/documentation/)."
  - Eliminar el bloque "### Sintaxis" con dotnet run src/Console/...
  - Mantener Flujo, Integración y Estándares.

### 2.1 – Modificar: architect.json

- **Id:** 2.1
- **Acción:** Modificar
- **Ruta:** `SddIA/agents/architect.json`
- **Ubicación:** Campo "tools" y array "instructions".
- **Propuesta:**
  - En "tools": sustituir `"GesFer.Console --spec"` por referencia a skills, p. ej. `"invoke-command (paths.skillCapsules.iniciar-rama, invoke-command)", "documentation (paths.skillsDefinitionPath/documentation)"` o eliminar y dejar indicado en instructions.
  - En "instructions": sustituir "Generar Spec: Utilizar `GesFer.Console --spec`..." por "Generar Spec: Formalizar requerimientos en documentación en carpeta de tarea (Cúmulo); comandos vía invoke-command; estándares según skill documentation."

### 2.2 – Modificar: clarifier.json

- **Id:** 2.2
- **Acción:** Modificar
- **Ruta:** `SddIA/agents/clarifier.json`
- **Ubicación:** "triggers", "tools", "instructions".
- **Propuesta:**
  - En "triggers": sustituir "New SPEC generated by `GesFer.Console --spec`" por "New SPEC generated (documentación en carpeta de tarea)".
  - En "tools": sustituir "GesFer.Console --clarify" por "invoke-command", "documentation".
  - En "instructions": sustituir "Analyze the provided SPEC generated by `GesFer.Console --spec`" por "Analyze the provided SPEC (generado por proceso documental)"; sustituir "GesFer.Console --clarify" por proceso manual + invoke-command/documentation.

### 2.3 – Modificar: process-interaction.json

- **Id:** 2.3
- **Acción:** Modificar
- **Ruta:** `SddIA/agents/auditor/process-interaction.json`
- **Ubicación:** Array "instructions".
- **Propuesta:**
  - Sustituir "Action: Enforce Spec Generation via `GesFer.Console --spec`." por "Action: Enforce Spec Generation via documentación en carpeta de tarea; validación según invoke-command y documentation (paths.skillCapsules, paths.skillsDefinitionPath)."

### 2.4 – Revisar: security-engineer.json

- **Id:** 2.4
- **Acción:** Modificar (opcional)
- **Ruta:** `SddIA/agents/security-engineer.json`
- **Ubicación:** Texto que menciona gesfer-console_*.log.
- **Propuesta:**
  - Si se desea aclarar: añadir nota de que "gesfer-console_*.log" es nombre de archivo de logs (legacy), no referencia a herramienta GesFer.Console. Si ya está claro, no cambiar.

### 3.1 – Modificar: patterns-in-planning-implementation-execution.md

- **Id:** 3.1
- **Acción:** Modificar
- **Ruta:** `SddIA/norms/patterns-in-planning-implementation-execution.md`
- **Ubicación:** Sección "1. Fase de planificación", criterio "Consultar paths.patternsPath".
- **Propuesta:**
  - Sustituir "El agente o herramienta que genera el plan (p. ej. GesFer.Console --plan)" por "El agente o proceso que genera el plan (documentación manual; comandos vía invoke-command, paths.skillCapsules[\"invoke-command\"])".

### 3.2 – Modificar: spec-template.md

- **Id:** 3.2
- **Acción:** Modificar
- **Ruta:** `SddIA/templates/spec-template.md`
- **Ubicación:** Sección 3.1 "Componentes Afectados" y sección 7 "Trazabilidad de Auditoría".
- **Propuesta:**
  - Eliminar la línea "*   `src/Console`: Comandos y lógica de interfaz."
  - Sustituir "Generación inicial mediante `GesFer.Console --spec`" por "Generación inicial mediante proceso documental (invoke-command, documentation; paths.skillCapsules, paths.skillsDefinitionPath)."

### 4.1 – Modificar: pr-skill.md

- **Id:** 4.1
- **Acción:** Modificar
- **Ruta:** `scripts/skills/pr-skill.md`
- **Ubicación:** Punto 4 del Propósito; sección 3 Flujo paso 6; sección 4.3 "Proyecto .NET"; sección 6 si existe referencia a Consola.
- **Propuesta:**
  - Sustituir "Suite completa de tests (opción 11 de la Consola)" por "Suite completa de tests (dotnet test del proyecto de IntegrationTests)."
  - En Flujo: sustituir "Suite completa de tests (dotnet run ... -- 11)" por "Suite completa de tests (dotnet test, proyecto IntegrationTests)."
  - Sustituir la subsección 4.3 "Proyecto .NET" por: "Ejecución de tests: dotnet test sobre el proyecto de IntegrationTests (paths según solución). Los estándares de ejecución de comandos se rigen por las skills **invoke-command** (paths.skillCapsules[\"invoke-command\"]) y **dotnet-development** (paths.skillsDefinitionPath/dotnet-development/)."
  - Eliminar referencias a "Consola", "src/Console", "opción 11" en todo el documento.

### 4.2 – Modificar: pr-skill.sh

- **Id:** 4.2
- **Acción:** Modificar
- **Ruta:** `scripts/skills/pr-skill.sh`
- **Ubicación:** Bloque "Suite completa de tests" (aprox. líneas 117-127).
- **Propuesta:**
  - Sustituir `dotnet run --project src/Console/GesFer.Console.csproj --no-build -- 11` por `dotnet test src/GesFer.Admin.Back.IntegrationTests/GesFer.Admin.Back.IntegrationTests.csproj --no-build -v q`.
  - Ajustar ruta si la estructura del repo usa otra convención (ej. `./src/GesFer.Admin.Back.IntegrationTests/...`).

### 5.1 – Modificar: manifesto.json

- **Id:** 5.1
- **Acción:** Modificar
- **Ruta:** `SddIA/manifesto.json`
- **Ubicación:** architecture_pillars.Utils.rules.
- **Propuesta:**
  - En el array "rules" de Utils, eliminar el elemento "Contains Console, Seeds, Migrations." y sustituir por "Contains Seeds, Migrations." (o solo "Seeds, Migrations" si el formato es lista sin "Contains").

### 5.2 – Modificar: DT-2025-001-MissingConsoleTool.md

- **Id:** 5.2
- **Acción:** Modificar
- **Ruta:** `docs/DeudaTecnica/DT-2025-001-MissingConsoleTool.md`
- **Ubicación:** Campo Estado y añadir sección de cierre.
- **Propuesta:**
  - Cambiar "**Estado:** Abierta" por "**Estado:** Cerrada".
  - Añadir sección "Cierre (YYYY-MM-DD)": "Decisión: Documentación actualizada; acciones SddIA referencian skills/tools (invoke-command, documentation). No se implementa GesFer.Console en Admin.Back. Opción 2 del documento original."

---

## Resumen por archivo

| Archivo | Ítems |
|---------|-------|
| SddIA/actions/spec/spec.md | 1.1 |
| SddIA/actions/clarify/spec.md | 1.2 |
| SddIA/actions/planning/spec.md | 1.3 |
| SddIA/agents/architect.json | 2.1 |
| SddIA/agents/clarifier.json | 2.2 |
| SddIA/agents/auditor/process-interaction.json | 2.3 |
| SddIA/agents/security-engineer.json | 2.4 |
| SddIA/norms/patterns-in-planning-implementation-execution.md | 3.1 |
| SddIA/templates/spec-template.md | 3.2 |
| scripts/skills/pr-skill.md | 4.1 |
| scripts/skills/pr-skill.sh | 4.2 |
| SddIA/manifesto.json | 5.1 |
| docs/DeudaTecnica/DT-2025-001-MissingConsoleTool.md | 5.2 |

---

## Orden sugerido

Aplicar por fases (1 → 2 → 3 → 4 → 5). Dentro de cada fase, el orden de ítems puede ser paralelo salvo dependencias explícitas. Tras 4.2, ejecutar build y dotnet test para verificar.

---

*Documento de implementación. No modifica código por sí mismo; guía para la acción execution.*
