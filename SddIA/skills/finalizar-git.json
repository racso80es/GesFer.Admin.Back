{
  "spec_version": "1.0.0",
  "skill_id": "finalizar-git",
  "name": "Finalizar Git",
  "description": "Centraliza las interacciones con Git para aceptar PR a master, unificar, eliminar rama unificada y volver a master. Consumible por la acción finalize.",
  "owner": "tekton-developer",
  "status": "Active",
  "phases": [
    {
      "id": "pre_pr",
      "name": "Pre-PR",
      "description": "Push de la rama y creación del PR hacia master.",
      "steps": [
        "Comprobar rama actual != master",
        "Commit pendientes con mensaje convencional si aplica",
        "git push origin <rama_actual>",
        "Crear PR hacia master (API o instrucciones); descripción enlaza a {persist}"
      ]
    },
    {
      "id": "post_pr",
      "name": "Post-PR",
      "description": "Tras merge del PR en remoto: actualizar master local, eliminar rama, volver a master.",
      "steps": [
        "Verificar PR mergeado en master (remoto)",
        "Invocar scripts/skills/Merge-To-Master-Cleanup.ps1 -BranchName <rama_actual> -DeleteRemote (o comandos git equivalentes)",
        "Comprobar git status y git branch -vv"
      ],
      "script": "scripts/skills/Merge-To-Master-Cleanup.ps1"
    }
  ],
  "rules": [
    "Nunca commit directo en master; todo en feat/ o fix/ y merge vía PR",
    "Mensajes de commit: Conventional Commits (feat:, fix:, chore:)",
    "Pre-push: validación (validacion.json pass) cuando lo exija el proceso"
  ],
  "common_workflows": {
    "push_and_open_pr": "git push origin <branch>; luego crear PR hacia master",
    "after_pr_merged": "Invocar Merge-To-Master-Cleanup.ps1 -BranchName <branch> -DeleteRemote; o comandos git equivalentes"
  },
  "scripts": {
    "pre_pr": "scripts/skills/Unificar-Rama.ps1",
    "post_pr": "scripts/skills/Merge-To-Master-Cleanup.ps1"
  },
  "related_artefacts": ["SddIA/actions/finalize.md"],
  "related_agents": ["tekton-developer", "finalizer", "release-agent"]
}
