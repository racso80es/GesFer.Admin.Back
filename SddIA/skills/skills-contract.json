{
  "contract_version": "1.1.0",
  "scope": "SddIA/skills/",
  "description": "Contrato que todo skill debe cumplir: definición en paths.skillsDefinitionPath/<skill-id>/, implementación en paths.skillCapsules[skill-id]. Implementación por defecto en Rust.",
  "default_implementation": {
    "language": "rust",
    "rationale": "Rendimiento, seguridad de memoria, portabilidad y distribución como binario. Las implementaciones por defecto de scripts de skills (y de tools) han de ser en Rust.",
    "delivery": [
      "Cada skill con ejecutable reside en una cápsula paths.skillCapsules[skill-id]. Los ejecutables se construyen en paths.skillsRustPath (Cúmulo) y se copian a <cápsula>/bin/.",
      "Launcher .bat en la cápsula invoca el .exe en bin/ si existe; si no, fallback a PowerShell (.ps1).",
      "manifest.json, documentación .md obligatorios en la cápsula. Rutas canónicas: Cúmulo paths.skillCapsules."
    ]
  },
  "definition_artefacts": [
    { "ext": ".md", "naming": "spec.md", "path": "paths.skillsDefinitionPath/<skill-id>/", "purpose": "Especificación legible: objetivo, entradas/salidas, flujo, reglas. es-ES." },
    { "ext": ".json", "naming": "spec.json", "path": "paths.skillsDefinitionPath/<skill-id>/", "purpose": "Metadatos machine-readable; implementation_path_ref si tiene cápsula." }
  ],
  "required_artefacts_capsule": [
    { "ext": ".rs", "path": "paths.skillsRustPath (Cúmulo)/src/bin", "purpose": "Implementación por defecto en Rust." },
    { "ext": "binary", "path": "<cápsula>/bin/<skill_bin>.exe", "purpose": "Ejecutable Rust en la cápsula (copiado desde skills-rs/install.ps1)." },
    { "ext": ".ps1", "purpose": "Fallback cuando no exista binario Rust." },
    { "ext": ".bat", "purpose": "Launcher en cápsula: binario en bin/ si existe, si no .ps1." },
    { "ext": ".json", "naming": "manifest", "purpose": "Manifest de la cápsula: skillId, components, contract_ref." },
    { "ext": ".md", "purpose": "Documentación en la cápsula. es-ES." }
  ],
  "implementation_requirements": [
    "El ejecutable o script sugerido para la implementación de la skill debe ser desarrollado en Rust (localizado en paths.toolsRustPath (Cúmulo))."
  ],
  "security_model": {
    "required_token": "Karma2Token",
    "token_ref": "SddIA/tokens/karma2-token/spec.json",
    "description": "Todo skill debe ser invocado bajo el contexto de un Karma2Token válido."
  },
  "constraints": [
    "Cumplimiento obligatorio de Karma2Token para trazabilidad y seguridad.",
    "skill-id en kebab-case.",
    "Rutas canónicas solo desde Cúmulo (paths.skillsDefinitionPath, paths.skillCapsules, paths.skillsIndexPath).",
    "Un skill sin spec.md y spec.json en su carpeta no se considera completo.",
    "Las acciones y agentes resuelven la definición en SddIA y la implementación vía Cúmulo."
  ],
  "consumers": ["paths.actionsPath", "SddIA/agents/*.json", "paths.processPath"]
}
