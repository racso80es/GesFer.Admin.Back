{
  "skill_id": "invoke-command",
  "name": "Interceptor de Ejecuciones de Sistema",
  "description": "Skill obligatoria para ejecutar comandos de sistema (git, dotnet, npm, pwsh, etc.) mediante un contrato implementado: telemetría, validación y registro por rama.",
  "implementation_path_ref": "paths.skillCapsules.invoke-command",
  "contract_ref": "paths.skillsDefinitionPath/skills-contract.json (Cúmulo)",
  "parameters": {
    "command": {
      "required": true,
      "description": "Comando a ejecutar (obligatorio si no se usa command_file). Acepta -Command/--command."
    },
    "command_file": {
      "required": false,
      "description": "Ruta a archivo cuyo contenido es el comando. Evita inyección en terminal. Acepta --command-file/-CommandFile."
    },
    "contexto": { "required": false, "default": "GesFer" },
    "fase": {
      "required": false,
      "default": "Accion",
      "enum": ["Triaje", "Analisis", "Evaluacion", "Marcado", "Accion"]
    }
  },
  "command_file_routing": {
    "via_bat": "Usar ruta absoluta al archivo (p. ej. --command-file con path absoluto) para que el exe resuelva bien desde cualquier directorio.",
    "via_exe_from_repo_root": "Ejecutar el exe desde la raíz del repo; entonces las rutas relativas al archivo se resuelven correctamente."
  },
  "rules": [
    "MANDATORY: Cualquier comando de sistema que el agente deba ejecutar ha de invocarse a través de esta skill.",
    "Interface: Command (obligatorio) o --command-file; Contexto (default GesFer); Fase (Triaje|Analisis|Evaluacion|Marcado|Accion). El exe acepta -Command/-Fase y --command-file.",
    "Compliance: AC-001 validación sintáctica; registro en docs/diagnostics/{branch}/execution_history.json; alineación Protocolo Racso-Tormentosa."
  ],
  "scope_clarification": "Aplica siempre que el agente ejecute cualquier comando de sistema: sin excepción para git, dotnet, npm, pwsh. No hay excepciones.",
  "usage_instruction": "Cada vez que el agente deba ejecutar un comando, invocar la cápsula invoke-command (paths.skillCapsules.invoke-command). Prohibido ejecutar comandos directamente en el shell."
}
